# [ 7주차 - 0925 ] 스터디 내용

```bash
    금일 커리큘럼
        ├ 09:00 ~ 14:00 FrontEnd (DOM 개념, 요소 선택, 요소 제어, 이벤트 처리)
        └ 14:00 ~ 18:00 자바 프로그래밍
```

## 1. DOM 개념

> DOM (Document Object Model)

### DOM이란?

* **DOM (Document Object Model)** : HTML 문서를 객체로 표현한 트리 구조
* 브라우저가 HTML을 파싱하여 메모리에 생성하는 객체 모델
* JavaScript가 HTML 요소에 접근하고 조작할 수 있도록 하는 API

### DOM 트리 구조

```
                    document
                        |
                      <html>
                        |
        ┌───────────────┼───────────────┐
      <head>                         <body>
        |                              |
    ┌───┼───┐                     ┌────┼────┐
  <meta> <title>                <div>      <script>
           |                     |
        "페이지제목"          ┌────┼────┐
                            <h1>     <p>
                             |       |
                          "제목"   "내용"
```

### DOM의 주요 개념

**1. 노드 (Node)**
* HTML 문서의 모든 구성 요소는 노드
* 요소 노드 : `<div>`, `<p>`, `<span>` 등 HTML 태그
* 텍스트 노드 : 태그 안의 텍스트 내용
* 속성 노드 : id, class, src 등 HTML 속성

**2. DOM 트리**
* HTML 문서의 계층적 구조를 트리 형태로 표현
* 부모-자식 관계로 구성 (Parent-Child)
* 형제 관계 (Sibling) 존재

**3. DOM API**
* 브라우저에서 제공하는 DOM 조작 메서드와 속성
* `document` 객체를 통해 접근
* HTML 요소 선택, 수정, 생성, 삭제 등의 기능 제공


### 엘리먼트와 노드

* **엘리먼트 (Element)** : HTML 태그를 의미
* **노드 (Node)** : DOM 트리의 모든 구성 요소 (엘리먼트, 텍스트, 주석 등)
* 즉, 모든 엘리먼트는 노드 O 맞음. 모든 노드는 엘리먼트 X 아님

```html
<!-- 주석 --> <!-- node(comment) -->
<div id="container"> <!-- element -->
    Hello World! <!-- node(text) -->
    <p> <!-- element -->
        안녕하세요 <!-- node(text) -->
    </p>
</div>
```

---

## 2. DOM 요소 선택

- `getElementById` : id 속성으로 요소 선택
- `getElementsByClassName` : 클래스 이름으로 요소 선택 (여러 요소 반환)
- `getElementsByTagName` : 태그 이름으로 요소 선택 (여러 요소 반환)
- `querySelector` : CSS 선택자 문법으로 요소 선택 (첫 번째 요소 반환)
- `querySelectorAll` : CSS 선택자 문법으로 요소 선택 (여러 요소 반환)   

```js
// id 선택
const el01 = document.getElementById("id");
// <div id="id" class="class">Hello World</div>

// class 선택 (대상 요소 여러개)
const els02 = document.getElementsByClassName("class");
// HTMLCollection(3) [div.class, div.class, div.class]

// tag 선택 (대상 요소 여러개)
const els03 = document.getElementsByTagName("div");
// HTMLCollection(3) [div.class, div.class, div.class]

// CSS 선택자 (첫 번째 요소)
const el04 = document.querySelector(".class");
// <div id="id" class="class">Hello World</div>

// CSS 선택자 (모든 요소)
const els05 = document.querySelectorAll(".class");
// NodeList(3) [div.class, div.class, div.class]
```


* **htmlCollection, NodeList**
  - HTMLCollection : live(실시간) DOM 변경 사항 반영 (유사 배열)
  - NodeList : static(정적) DOM 변경 사항 반영 안됨 (유사 배열)

* **유사배열이란 ?**
    - 배열처럼 인덱스로 접근 가능, length 속성 존재, forEach 메서드 사용 가능
    - 배열 메서드 사용 불가 (map, filter, reduce 등)
    - 배열로 변환 필요 (Array.from() 또는 스프레드 연산자 사용)


---

## 3. DOM 요소 제어

**내용 수정/반환**
* `textContent` : 요소의 텍스트 내용 수정/반환
* `innerText` : 요소의 텍스트 내용 수정/반환 (**숨겨진 요소 제외**)
* `innerHTML` : 요소의 HTML 내용 수정/반환 (설정시 내부 HTML 다 변경됨)

**태그 생성 및 삽입**
* `createElement()` : 새로운 HTML 요소 생성
* `appendChild()` : 부모 요소의 마지막 자식으로 요소 추가
* `removeChild()` : 부모 요소에서 자식 요소 제거

**위치 지정 HTML 삽입**
* `insertAdjacentHTML(attr, text)` : 특정 위치에 HTML 문자열 삽입
  - **삽입 위치 속성**
  - beforebegin : 요소와 같은 레벨 바로 위
  - afterend : 요소와 같은 레벨 바로 뒤
  - afterbegin : 요소 내부, 첫 번째 자식으로
  - beforeend : 요소 내부, 마지막 자식으로

**스타일 제어**
* `style` : 요소의 개별 스타일 속성 설정
* `cssText` : 요소의 여러 스타일 속성을 한 번에 설정 (ES6+)


**클래스 제어**
* `classList` : 요소의 클래스 목록을 조작하는 DOMTokenList 객체
    - **메서드체이닝**
    - `add()` : 클래스 추가
    - `remove()` : 클래스 제거
    - `toggle()` : 클래스 토글 (존재하면 제거, 없으면 추가)
    - `contains()` : 클래스 존재 여부 확인 (true/false 반환)


```js
// 요소 선택
const el = document.getElementById("id");

// 텍스트 내용 변경
el.textContent = "텍스트";
el.innerText = "숨겨진 텍스트는 못찾는다"; 

// HTML 내용 변경
el.innerHTML = "<span>New HTML</span>";

// 태그 생성
const newDiv = document.createElement("div");
newDiv.textContent = "새로운 DIV";
el.appendChild(newDiv);
el.removeChild(newDiv);

// 위치 지정 HTML 삽입
const say = "안녕";
elTemp = `<div>${say}</div>`;
el.insertAdjacentHTML("beforeend", elTemp); 
// beforebegin, afterbegin, beforeend, afterend

// 스타일 제어
el.style.color = "red";
el.style.backgroundColor = "yellow";
el.cssText = "font-size: 20px; margin: 10px;";
// css Text : 여러 스타일 속성을 한 번에 설정 가능 (ES 6+)

// 클래스 제어
el.classList.add("new-class");      // 클래스 추가
el.classList.remove("old-class");   // 클래스 제거
el.classList.toggle("toggle-class"); // 클래스 토글
```

---

## 4. DOM 이벤트 처리

> addEventListener : 이벤트가 발생했을 때 함수를 실행하는 메서드

* **이벤트 리스너**
  - `element.addEventListener(event, function, useCapture)`
  - event : 이벤트 종류 (예: 'click', 'mouseover', 'keydown' 등)
  - function : 이벤트 발생 시 실행할 함수
  - useCapture : 이벤트 캡처링 여부 (기본값 false, 버블링)

* **이벤트 종류**
  - 클릭 이벤트 : click
  - 마우스 이벤트 : mouseover, mouseout, mousemove
  - 키보드 이벤트 : keydown, keyup, keypress
  - 폼 이벤트 : submit, change, input
  - 윈도우 이벤트 : load, resize, scroll

* **이벤트 버블링과 캡처링**
  - 버블링 : 자식요소에서 이벤트 감지 -> 부모요소까지 전파됨 (default)
  - 캡처링 : 부모요소에서 이벤트 감지 -> 자식요소까지 전파됨
  - 기본적으로 이벤트는 버블링 단계에서 처리됨 (useCapture를 true로 설정하면 캡처링 단계에서 처리)

* **전파 방지**
  - `event.stopPropagation()` : 이벤트 버블링/캡처링 중지
  - `event.preventDefault()` : 기본 동작 방지 (예: 링크 클릭 시 페이지 이동 방지)
  - 이벤트 리스너 useCapture : true (캡처링), false (버블링, 기본값)


```js
// 요소 선택
const el = document.getElementById("myButton");

// 클릭 이벤트 리스너 등록
el.addEventListener("click", function() {
    alert("버튼 클릭!");
});


// 이벤트 버블링 막기
el.addEventListener("click", function(event) {
    event.stopPropagation(); // 이벤트 버블링 방지
    console.log("버튼 클릭 이벤트 처리");
});

// 이벤트 캡처링변경 예시
document.body.addEventListener("click", function() {
    console.log("body 클릭 이벤트 처리");
}, true);


// 인풋 체크박스 예시
const checkEl = document.getElementById("myCheckbox");
checkEl.addEventListener("change", function() {
    if (this.checked) {
        console.log("선택됨");
    } else {
        console.log("선택안됨");
    }
});

// 인풋 텍스트 벨류 예시
const inputEl = document.getElementById("myInput");
inputEl.addEventListener("input", function() {
    console.log("입력값:", this.value);
});

```

### 폼 요소 제출 심플 예시

* `form.submit()` : 폼 제출 메서드
    - 폼의 action 속성에 지정된 URL로 폼 데이터를 전송
    - 폼의 method 속성에 따라 GET 또는 POST 방식으로 전송
* `form.reset()` : 폼 초기화 메서드

```html
<!-- novalidate : 브라우저의 기본 폼 유효성 검사를 비활성화  -->
<form novalidate action="" method="get">
    <p>회원정보 입력</p>
    
    <label for="input-id">아이디</label>
    <input type="text" id="input-id" name="id" required>
    
    <label for="input-pw">비밀번호</label>
    <input type="password" id="input-pw" name="pw" required>
    
    <label for="input-pw-confirm">비밀번호 확인</label>
    <input type="password" id="input-pw-confirm" name="pw-confirm" required>
    
    <label>성별</label>
    <input type="radio" name="gender" id="radio-1" value="male">
    <label for="radio-1">남성</label>
    <input type="radio" name="gender" id="radio-2" value="female">
    <label for="radio-2">여성</label>
    
    <button type="submit">등록</button>
</form>

<script>
    const formEl    = document.querySelector("form");
    const idEl      = document.querySelector("#input-id");
    const pwEl      = document.querySelector("#input-pw");
    const pwcEl     = document.querySelector("#input-pw-confirm");
    const genderEls = document.querySelectorAll("[name='gender']");

    formEl.addEventListener("submit", function(event) {
        event.preventDefault(); // 폼 제출 기본 동작 방지

        const id    = idEl.value;
        const pw    = pwEl.value;
        const pwc   = pwcEl.value;
        const gender = [...genderEls].find(item => item.checked)?.value || '';

        // 유효성 검사
        if (!id)             return alert("아이디를 입력해주세요."), idEl.focus();
        else if (!pw)        return alert("비밀번호를 입력해주세요."), pwEl.focus();
        else if (!pwc)       return alert("비밀번호 확인을 입력해주세요."), pwcEl.focus();
        else if (pw !== pwc) return alert("비밀번호가 일치하지 않습니다."), pwcEl.focus();
        else if (!gender)    return alert("성별을 선택해주세요."), genderEls[0].focus();

        alert("폼이 성공적으로 제출되었습니다!");
        console.log({ id: id, pw: pw, gender: gender });
        // formEl.submit(); // 폼 제출
    });
</script>
```

---

## etc.

### JSONPlaceholder API

> JSONPlaceholder : 무료 온라인 REST API 서비스 (테스트 및 프로토타이핑 용도)

* 사이트 : https://jsonplaceholder.typicode.com/
* 가이드 : https://jsonplaceholder.typicode.com/guide/
* 샘플JSON : https://jsonplaceholder.typicode.com/users


**REST API 란?**
* 자원(데이터)을 URL로 표현하고, HTTP 메서드(GET, POST, PUT, DELETE 등)를 사용하여 자원에 대한 CRUD 작업을 수행하는 아키텍처 스타일


### 해당 API 비동기 요청 예시

**요청 동작 방식**
1. 클라이언트에서 서버로 요청을 보냄
2. 서버는 요청을 처리하고 응답을 반환
3. 클라이언트는 응답을 받아서 처리



```html
<div class="control-area">
    <button id="loadBtn" class="btn-primary">사용자 목록 불러오기</button>
</div>

<div class="user-list-container">
    <h2>사용자 목록</h2>
    <ul id="userList" class="user-list"></ul>
</div>
```

```js
// JSONPlaceholder (https://jsonplaceholder.typicode.com/) API를 사용
// 사용자 목록을 가져와서 화면에 표시하는 예제

window.addEventListener('DOMContentLoaded', () => {
    const ulEl = document.querySelector('#userList');
    const btnEl = document.querySelector('#loadBtn');
    const API_URL = 'https://jsonplaceholder.typicode.com/users';

    btnEl.addEventListener('click', async () => {
        ulEl.innerHTML = '<li>사용자 데이터를 불러오는 중...</li>';
        try {
            btnEl.disabled = true;
            
            const response = await fetch(API_URL);
            if (!response.ok) throw new Error('네트워크 응답에 문제가 있습니다.');
            const users = await response.json();
            
            ulEl.innerHTML = ''; // 기존 목록 초기화
            let cnt = 0;
            users.forEach(user => { 
                if(cnt++ >= 3) return; // 최대 3명까지만 표시
                const liTemp = `
                    <li class="user-item">
                        <div class="user-info">
                            <h3 class="user-name">name : ${user.name}</h3>
                            <p class="user-email">email : ${user.email}</p>
                            <p class="user-phone">phone : ${user.phone}</p>
                            <p class="user-website">website : ${user.website}</p>
                        </div>
                    </li>
                `;
                ulEl.insertAdjacentHTML('beforeend', liTemp);
            });
        } catch (error) {
            console.error('사용자 데이터를 가져오는 중 오류 발생:', error);
            alert('사용자 데이터를 가져오는 중 오류가 발생했습니다.');
        } finally {
            btnEl.disabled = false;
        }
    });
})
```